#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

if [ "$CI" != "true" ]; then
  echo "تخطي فحوصات pre-commit محلياً (CI فقط)"
  exit 0
fi

echo "تشغيل فحص الجودة قبل الـ Commit..."

# 1. تشغيل فحص الجودة المخصص
if [ -f scripts/quality-assurance/pre-commit-quality-check.js ]; then
  node scripts/quality-assurance/pre-commit-quality-check.js
else
  echo "تحذير: ملف فحص الجودة غير موجود، سيتم تخطيه"
fi

# 2. تشغيل lint-staged للفحص التلقائي
npx lint-staged

echo "تم اجتياز فحوصات الجودة"
