# ๐ ูุธุงู ุชุฑุชูุจ ุงูุฅุนูุงูุงุช ุงููููุฒุฉ ุงูููุญุฏ

## ูุธุฑุฉ ุนุงูุฉ

ูุธุงู ููุญุฏ ูุชุฑุชูุจ ุงูุฅุนูุงูุงุช ุงููููุฒุฉ (ุงููุฑูุฌุฉ) ูู ุฌููุน ุตูุญุงุช ุงูุนุฑุถ ุจุงููููุนุ ูุถูู ุธููุฑ ุงูุฅุนูุงูุงุช ุงููุฏููุนุฉ ุฃููุงู ุซู ุงูุชุฑุชูุจ ุญุณุจ ุฃููููุฉ ุงูุจุงูุฉ.

---

## ๐ ุจุงูุงุช ุงูุชุฑููุฌ

| ุงูุจุงูุฉ    | ุงูุฃููููุฉ | ุงูุณุนุฑ  | ุงููุฏุฉ  | ุงููุถุงุนู |
| --------- | -------- | ------ | ------ | ------- |
| **ูุฌุงูู** | 0        | 0 ุฏ.ู  | -      | x1      |
| **ุฃุณุงุณู** | 1        | 15 ุฏ.ู | 7 ุฃูุงู | x2      |
| **ูุชูุฏู** | 2        | 35 ุฏ.ู | 14 ููู | x4      |
| **VIP**   | 3        | 65 ุฏ.ู | 30 ููู | x6      |

---

## ๐ง ุงููููุงุช ุงูุฃุณุงุณูุฉ

### 1. ุฎุฏูุฉ ุงูุชุฑุชูุจ ุงูููุญุฏุฉ

**ุงูููู:** `lib/services/promotion-sorting-service.ts`

```typescript
import {
  sortByPromotion,
  separateByPromotion,
  mergeWithFeaturedItems,
} from '@/lib/services/promotion-sorting-service';

// ุชุฑุชูุจ ุจุณูุท - ุงููููุฒุฉ ุฃููุงู
const sorted = sortByPromotion(items, {
  checkPromotionValidity: true,
  secondarySort: 'newest',
});

// ูุตู ุงููููุฒุฉ ุนู ุงูุนุงุฏูุฉ
const { featured, regular } = separateByPromotion(items);

// ุฏูุฌ ุฐูู ูุน ุญุฏ ุฃูุตู ูููููุฒุฉ ูู ุงูุฃุนูู
const merged = mergeWithFeaturedItems(items, { maxFeaturedAtTop: 6 });
```

### 2. ูููู ุงูุดุงุฑุงุช ุงูููุญุฏ

**ุงูููู:** `components/ui/FeaturedBadge.tsx`

```typescript
import { SmartFeaturedBadge, CardFeaturedBadge } from '@/components/ui/FeaturedBadge';

// ุดุงุฑุฉ ุฐููุฉ ุชุญุฏุฏ ุงูููุน ุชููุงุฆูุงู
<SmartFeaturedBadge
  packageType={item.promotionPackage}
  featured={item.featured}
  size="sm"  // xs | sm | md | lg | xl
/>

// ุดุงุฑุฉ ููุจุทุงูุงุช
<CardFeaturedBadge position="top-left" size="md" variant="gold" />
```

### 3. ูุธุงู ุงูุชุฑููุฌ ุงูุฃุณุงุณู

**ุงูููู:** `lib/promotion/promotion-system.ts`

---

## ๐ ุงูุตูุญุงุช ูุงูู APIs

### `/auctions` - ุตูุญุฉ ุงููุฒุงุฏุงุช โ

- **API:** `/api/auctions/index.ts`
- **ุงูุชุฑุชูุจ:** `featured DESC โ promotionPriority DESC โ createdAt DESC`
- **ุงูุดุงุฑุงุช:** `SmartFeaturedBadge` ูู `AuctionCardGrid` ู `NewAuctionCard`

### `/marketplace` - ุงูุณูู ุงูููุฑู โ

- **API:** `/api/marketplace.ts`
- **ุงูุชุฑุชูุจ:** `featured DESC โ promotionPriority DESC โ createdAt DESC`
- **ุงูุดุงุฑุงุช:** `SmartFeaturedBadge` ูู `MarketplaceCarCard`

### `/transport/browse` - ุฎุฏูุงุช ุงูููู โ

- **API:** `/api/transport.ts`
- **ุงูุชุฑุชูุจ:** `sortByPromotion()` ูู ุงูุฎุฏูุฉ ุงูููุญุฏุฉ
- **ุงูุดุงุฑุงุช:** `SmartFeaturedBadge` ุนูู ุงูุจุทุงูุงุช
- **ุฎูุงุฑ ุงูุชุฑุชูุจ:** "โญ ุงููููุฒุฉ ุฃููุงู" ูู ูุงุฆูุฉ ุงูุชุฑุชูุจ

### `/yards` - ุงูุณุงุญุงุช โ

- **API:** `/api/yards.ts`
- **ุงูุชุฑุชูุจ:** `featured DESC โ verified DESC โ createdAt DESC`
- **ุงูุดุงุฑุงุช:** ุดุงุฑุฉ "ูููุฒ" ูุดุงุฑุฉ "ููุซู"

---

## ๐จ ุฃููุงุน ุงูุดุงุฑุงุช

### ุงูุจุทุงูุงุช

| ุงูููุน       | ุงูููู      | ุงูุงุณุชุฎุฏุงู   |
| ----------- | ---------- | ----------- |
| **gold**    | ุฐูุจู       | ุจุงูุฉ ุฃุณุงุณูุฉ |
| **premium** | ุฐูุจู ูุชุฏุฑุฌ | ุจุงูุฉ ูุชูุฏูุฉ |
| **vip**     | ุจููุณุฌู     | ุจุงูุฉ VIP    |
| **basic**   | ุฐูุจู       | ุนุงู         |

### ุงูุฃุญุฌุงู

- `xs` - ุตุบูุฑ ุฌุฏุงู (10px)
- `sm` - ุตุบูุฑ (12px)
- `md` - ูุชูุณุท (14px)
- `lg` - ูุจูุฑ (16px)
- `xl` - ูุจูุฑ ุฌุฏุงู (18px)

---

## ๐ ุฎูุงุฑุฒููุฉ ุงูุชุฑุชูุจ

```
1. ูุญุต ุตูุงุญูุฉ ุงูุชุฑููุฌ (ุชุงุฑูุฎ ุงูุงูุชูุงุก)
2. ุงููููุฒุฉ ุงูุตุงูุญุฉ ุฃููุงู
3. ุซู ุญุณุจ ุฃููููุฉ ุงูุจุงูุฉ (VIP > Premium > Basic > Free)
4. ุซู ุงูููุซููู
5. ุซู ุงูุฃุญุฏุซ
```

### ูุซุงู ุนููู:

```typescript
const sortByPromotion = (items) => {
  return items.sort((a, b) => {
    // 1. ุงููููุฒุฉ ุฃููุงู
    if (a.featured !== b.featured) return b.featured ? 1 : -1;

    // 2. ุญุณุจ ุงูุฃููููุฉ
    const priorityDiff = (b.promotionPriority || 0) - (a.promotionPriority || 0);
    if (priorityDiff !== 0) return priorityDiff;

    // 3. ุงูุฃุญุฏุซ
    return new Date(b.createdAt) - new Date(a.createdAt);
  });
};
```

---

## ๐ก APIs - ุชุฑุชูุจ Prisma

```typescript
// ููุงุณุชุฎุฏุงู ูู ุฌููุน APIs
orderBy: [{ featured: 'desc' }, { promotionPriority: 'desc' }, { createdAt: 'desc' }];
```

---

## โ ูุงุฆูุฉ ุงูุชุญูู ููุชุทุจูู

### ุนูุฏ ุฅูุดุงุก ุตูุญุฉ ุนุฑุถ ุฌุฏูุฏุฉ:

- [ ] ุงุณุชุฎุฏุงู `sortByPromotion()` ุฃู Prisma orderBy
- [ ] ุฅุถุงูุฉ `SmartFeaturedBadge` ููุจุทุงูุงุช
- [ ] ุฏุนู ุงูุญููู: `featured`, `promotionPackage`, `promotionPriority`, `promotionEndDate`
- [ ] ุฅุถุงูุฉ ุฎูุงุฑ "ุงููููุฒุฉ ุฃููุงู" ูู ุงูุชุฑุชูุจ

### ุนูุฏ ุฅูุดุงุก API ุฌุฏูุฏ:

- [ ] ุฅุถุงูุฉ ุชุฑุชูุจ `featured DESC, promotionPriority DESC`
- [ ] ุฅุฑุฌุงุน ุญููู ุงูุชุฑููุฌ ูู ุงูุงุณุชุฌุงุจุฉ
- [ ] ุงุณุชุฎุฏุงู `getPrismaPromotionOrderBy()` ููุงุฎุชุตุงุฑ

---

## ๐ ูููู ุงููููุงุช

```
apps/web/
โโโ lib/
โ   โโโ services/
โ   โ   โโโ promotion-sorting-service.ts  # ุฎุฏูุฉ ุงูุชุฑุชูุจ ุงูููุญุฏุฉ
โ   โโโ promotion/
โ       โโโ promotion-system.ts           # ุชูููู ุงูุจุงูุงุช
โโโ components/
โ   โโโ ui/
โ       โโโ FeaturedBadge.tsx             # ููููุงุช ุงูุดุงุฑุงุช
โโโ pages/
    โโโ auctions.tsx                      # โ ูุญุฏุซ
    โโโ marketplace.tsx                   # โ ูุญุฏุซ
    โโโ transport/browse.tsx              # โ ูุญุฏุซ
    โโโ yards.tsx                         # โ ูุญุฏุซ
```

---

## ๐ ุงูุชุญุณููุงุช ุงููุณุชูุจููุฉ

1. **ุฅุถุงูุฉ ุชุญูููุงุช ููุชุฑููุฌ**
   - ุชุชุจุน ูุนุฏู ุงูููุฑ ููุฅุนูุงูุงุช ุงููููุฒุฉ
   - ููุงุฑูุฉ ุฃุฏุงุก ุงูุจุงูุงุช ุงููุฎุชููุฉ

2. **ุชุญุณูู ุงูุฃุฏุงุก**
   - ุชุฎุฒูู ูุคูุช (caching) ููุชุฑุชูุจ
   - ููุฑุณุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช ุนูู ุญููู ุงูุชุฑููุฌ

3. **ููุฒุงุช ุฅุถุงููุฉ**
   - ุดุงุฑุงุช ูุชุญุฑูุฉ ููุจุงูุงุช ุงูุนุงููุฉ
   - ุนุฏุงุฏ ุชูุงุฒูู ูุงูุชูุงุก ุงูุชุฑููุฌ

---

## ๐ ุงูุฏุนู

ูููุณุงุนุฏุฉ ุฃู ุงูุฅุจูุงุบ ุนู ูุดุงูู:

- ุฑุงุฌุน ุงูููุฏ ูู ุงููููุงุช ุงููุฐููุฑุฉ
- ุชุฃูุฏ ูู ุงุณุชูุฑุงุฏ ุงูููููุงุช ุจุดูู ุตุญูุญ
- ุชุญูู ูู ูุฌูุฏ ุญููู ุงูุชุฑููุฌ ูู ุงูุจูุงูุงุช

---

**ุชุงุฑูุฎ ุงูุฅูุดุงุก:** ุฏูุณูุจุฑ 2024  
**ุขุฎุฑ ุชุญุฏูุซ:** ุฏูุณูุจุฑ 2024
